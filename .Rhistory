ci_high <- c(results_Boredom$conf.high[["Year:Treatment"]],results_Divorce$conf.high[["Year:Treatment"]],
results_Contentment$conf.high[["Year:Treatment"]],results_Impairment$conf.high[["Year:Treatment"]],
results_Irritability$conf.high[["Year:Treatment"]],results_Loneliness$conf.high[["Year:Treatment"]],
results_Panic$conf.high[["Year:Treatment"]],results_Sadness$conf.high[["Year:Treatment"]],
results_Sleep$conf.high[["Year:Treatment"]],results_Stress$conf.high[["Year:Treatment"]],
results_Suicide$conf.high[["Year:Treatment"]],results_Wellbing$conf.high[["Year:Treatment"]],
results_Worry$conf.high[["Year:Treatment"]])
type <- c("Boredom", "Divorce", "Contentment","Impairment","Irritability", "Loneliness", "Panic","Sadness","Sleep", "Stress","Suicide", "Wellbing", "Worry")
df1 <- as.data.frame(list(estimate = estimate, ci_low = ci_low, ci_high= ci_high, type = type))
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none")+
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none")+
theme_classic(base_size = 15) +
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic(base_size = 15,legend.position = "none") +
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none")+
theme_classic() +
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none")+
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic(legend.position = "none")+
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic(legend.position = "none")+
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none")+
coord_flip()
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none")+
theme_classic()
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none")+
theme_classic()+
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none")+
theme_classic(legend.position = "none")+
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none")+
theme_classic(legend = "none")+
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none") +
coord_flip()
plot
ggsave(file = "did.pdf", plot = plot, width = 12, height = 10)
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none") +
coord_flip()
plot
ggsave(file = "did.pdf", plot = plot, width = 12, height = 10)
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none") +
coord_flip()
plot
theme_set(theme_bw(base_family="HiraKakuProN-W3"))
quartz(type="pdf",file="plot.pdf")
ggmcmc(ggs(fit),file=NULL)  ##### 変更行
dev.off()
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none") +
coord_flip()
theme_set(theme_bw(base_family="HiraKakuProN-W3"))
quartz(type="pdf",file="plot.pdf")
dev.off()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none") +
coord_flip()
theme_set(theme_bw(base_family="HiraKakuProN-W3"))
quartz(type="pdf",file="plot.pdf")
ggmcmc(ggs(plot),file=NULL)  ##### 変更行
dev.off()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none") +
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme(legend.position = "none") +
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic(legend.position = "none") +
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic(legend.position = "none") +
scale_fill_discrete(guide=FALSE)+
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic() +
scale_fill_discrete(guide=FALSE)+
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic() +
scale_fill_discrete(guide="none")+
coord_flip()
plot
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic() +
scale_fill_discrete(guide="none")+
coord_flip()
plot
ggsave(file = "graph_c.pdf", plot = plot, width = 12, height = 10)
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic() +
scale_fill_discrete(guide="none")+
coord_flip()
plot
ggsave(file = "did.pdf", plot = plot, width = 12, height = 10)
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic() +
scale_fill_discrete(guide="none")+
coord_flip()
plot
ggsave(file = "did.pdf", plot = plot, width = 18, height = 10)
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic() +
scale_fill_discrete(guide="none")+
coord_flip()
plot
ggsave(file = "did.pdf", plot = plot, width = 8, height = 10)
table_results_MONTH <- list()
table_results_MONTH[["Boredom"]] <- results_Boredom
table_results_MONTH[["Contentment"]] <- results_Contentment
table_results_MONTH[["Divorce"]] <- results_Divorce
table_results_MONTH[["Impairment"]] <- results_Impairment
modelsummary::modelsummary(table_results_MONTH,
gof_omit = "(R2 Adj.|Sample size)",
output = "latex")
table_results_MONTH <- list()
table_results_MONTH[["Sleep"]] <- results_Sleep
table_results_MONTH[["Stress"]] <- results_Stress
table_results_MONTH[["Suicide"]] <- results_Suicide
table_results_MONTH[["Wellbing"]] <- results_Wellbing
table_results_MONTH[["Worry"]] <- results_Worry
modelsummary::modelsummary(table_results_MONTH,
gof_omit = "(R2 Adj.|Sample size)",
output = "latex")
table_results_MONTH <- list()
table_results_MONTH[["Irritability"]] <- results_Irritability
table_results_MONTH[["Loneliness"]] <- results_Loneliness
table_results_MONTH[["Panic"]] <- results_Panic
table_results_MONTH[["Sadness"]] <- results_Sadness
modelsummary::modelsummary(table_results_MONTH,
gof_omit = "(R2 Adj.|Sample size)",
output = "latex")
table_results_MONTH <- list()
table_results_MONTH[["Sleep"]] <- results_Sleep
table_results_MONTH[["Stress"]] <- results_Stress
table_results_MONTH[["Suicide"]] <- results_Suicide
table_results_MONTH[["Wellbing"]] <- results_Wellbing
table_results_MONTH[["Worry"]] <- results_Worry
modelsummary::modelsummary(table_results_MONTH,
gof_omit = "(R2 Adj.|Sample size)",
output = "latex")
table_results_MONTH <- list()
table_results_MONTH[["Boredom"]] <- results_Boredom
table_results_MONTH[["Contentment"]] <- results_Contentment
table_results_MONTH[["Divorce"]] <- results_Divorce
table_results_MONTH[["Impairment"]] <- results_Impairment
modelsummary::modelsummary(table_results_MONTH,
gof_omit = "(R2 Adj.|Sample size)",
output = "latex")
table_results_MONTH <- list()
table_results_MONTH[["Irritability"]] <- results_Irritability
table_results_MONTH[["Loneliness"]] <- results_Loneliness
table_results_MONTH[["Panic"]] <- results_Panic
table_results_MONTH[["Sadness"]] <- results_Sadness
modelsummary::modelsummary(table_results_MONTH,
gof_omit = "(R2 Adj.|Sample size)",
output = "latex")
table_results_MONTH <- list()
table_results_MONTH[["Sleep"]] <- results_Sleep
table_results_MONTH[["Stress"]] <- results_Stress
table_results_MONTH[["Suicide"]] <- results_Suicide
table_results_MONTH[["Wellbing"]] <- results_Wellbing
table_results_MONTH[["Worry"]] <- results_Worry
modelsummary::modelsummary(table_results_MONTH,
gof_omit = "(R2 Adj.|Sample size)",
output = "latex")
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic() +
scale_fill_discrete(guide="none")+
theme(text = element_text(size = 24))
coord_flip()
plot
ggsave(file = "did.pdf", plot = plot, width = 8, height = 10)
plot<-df1 %>% ggplot(aes(x = type, y=estimate, fill=type))+ # データ、x軸、y軸、何で分けるかを宣言
geom_bar(stat="identity", position="dodge")+ # x軸もy軸も値を指定、積み上げずに横に配置
geom_errorbar(aes(ymin= ci_low, ymax=ci_high), position=position_dodge(0.9), width=0.2) +
theme_classic() +
scale_fill_discrete(guide="none")+
theme(text = element_text(size = 24))+
coord_flip()
plot
ggsave(file = "did.pdf", plot = plot, width = 8, height = 10)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
rm(list = ls())
path <- getwd()
pacman::p_load(tidyverse,patchwork)
# Font for windows and mac
if (path == "D:/Dropbox/2020COVID_impact_R/R"){
theme_set(theme_gray(base_size = 10, base_family = "Arial"))        # Windows用¥
} else{
theme_set(theme_gray(base_size = 10, base_family = "HiraginoSans-W3"))  # macOS用
}
# Chunk 3
df <- readr::read_csv("df_google.csv")
# Chunk 4
source("functions.R")
# Chunk 5
DID_results <-DID(outcome_var = df$Panic)
results_Panic <- DID_results
# Chunk 6
DID_results <- dynamic_DID(outcome_var = df$Panic)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Panic <- event_study_graph(data)
# Chunk 7
DID_results <-DID(outcome_var = df$Suicide)
results_Suicide <- DID_results
# Chunk 8
DID_results <- dynamic_DID(outcome_var = df$Suicide)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Suicide <- event_study_graph(data)
# Chunk 9
DID_results <-DID(outcome_var = df$Wellbing)
results_Wellbing <- DID_results
# Chunk 10
DID_results <- dynamic_DID(outcome_var = df$Wellbing)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Wellbing <- event_study_graph(data)
# Chunk 11
DID_results <-DID(outcome_var = df$Worry)
results_Worry <- DID_results
# Chunk 12
DID_results <- dynamic_DID(outcome_var = df$Worry)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Worry <- event_study_graph(data)
# Chunk 13
DID_results <-DID(outcome_var = df$Boredom)
results_Boredom <- DID_results
# Chunk 14
DID_results <- dynamic_DID(outcome_var = df$Boredom)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Boredom <- event_study_graph(data)
# Chunk 15
DID_results <-DID(outcome_var = df$Contentment )
results_Contentment <- DID_results
# Chunk 16
DID_results <- dynamic_DID(outcome_var = df$Contentment )
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Contentment  <- event_study_graph(data)
# Chunk 17
DID_results <-DID(outcome_var = df$Divorce)
results_Divorce <- DID_results
# Chunk 18
DID_results <- dynamic_DID(outcome_var = df$Divorce)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Divorce <- event_study_graph(data)
# Chunk 19
DID_results <-DID(outcome_var = df$Impairment)
results_Impairment <- DID_results
# Chunk 20
DID_results <- dynamic_DID(outcome_var = df$Impairment)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Impairment <- event_study_graph(data)
# Chunk 21
DID_results <-DID(outcome_var = df$Loneliness)
results_Loneliness <- DID_results
# Chunk 22
DID_results <- dynamic_DID(outcome_var = df$Loneliness)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Loneliness <- event_study_graph(data)
# Chunk 23
DID_results <-DID(outcome_var = df$Sadness)
results_Sadness <- DID_results
# Chunk 24
DID_results <- dynamic_DID(outcome_var = df$Sadness)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Sadness <- event_study_graph(data)
# Chunk 25
DID_results <-DID(outcome_var = df$Sleep )
results_Sleep  <- DID_results
# Chunk 26
DID_results <- dynamic_DID(outcome_var = df$Sleep )
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Sleep  <- event_study_graph(data)
# Chunk 27
DID_results <-DID(outcome_var = df$Stress)
results_Stress <- DID_results
# Chunk 28
DID_results <- dynamic_DID(outcome_var = df$Stress)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Stress <- event_study_graph(data)
# Chunk 29
DID_results <-DID(outcome_var = df$Irritability)
results_Irritability  <- DID_results
# Chunk 30
DID_results <- dynamic_DID(outcome_var = df$Irritability)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Irritability <- event_study_graph(data)
# Chunk 31
graph_Panic <- graph_Panic +
labs(title = "(a) Panic")
graph_Suicide <- graph_Suicide +
labs(title = "(b) Suicide")
graph_Wellbing <- graph_Wellbing +
labs(title = "(c) Wellbing")
graph_Worry <- graph_Worry +
labs(title = "(d) Worry")
graph <- graph_Panic+graph_Suicide+
graph_Wellbing+ graph_Worry+plot_layout(ncol = 2)
graph
#保存
ggsave(file = "graph_a.pdf", plot = graph, width = 12, height = 10)
# Chunk 32
graph_Boredom <- graph_Boredom +
labs(title = "(e) Boredom")
graph_Contentment <- graph_Contentment +
labs(title = "(f) Contentment")
graph_Divorce <- graph_Divorce +
labs(title = "(g) Divorce")
graph_Impairment <- graph_Impairment +
labs(title = "(h) Impairment")
graph <- graph_Boredom + graph_Contentment +
graph_Divorce + graph_Impairment +plot_layout(ncol = 2)
graph
#保存
ggsave(file = "graph_b.pdf", plot = graph,  width = 12, height = 10)
# Chunk 33
graph_Loneliness <- graph_Loneliness +
labs(title = "(i) Loneliness")
graph_Sadness <- graph_Sadness +
labs(title = "(j) Sadness")
graph_Sleep <- graph_Sleep +
labs(title = "(k) Sleep")
graph_Stress <- graph_Stress +
labs(title = "(l) Stress")
graph_Irritability <- graph_Irritability +
labs(title = "(m) Irritability")
graph <- graph_Loneliness+graph_Sadness +
graph_Sleep+ graph_Stress +
graph_Irritability +plot_layout(ncol = 2)
graph
#保存
ggsave(file = "graph_c.pdf", plot = graph, width = 12, height = 10)
# Chunk 34
table_results_MONTH <- list()
table_results_MONTH[["Boredom"]] <- results_Boredom
table_results_MONTH[["Contentment"]] <- results_Contentment
table_results_MONTH[["Divorce"]] <- results_Divorce
table_results_MONTH[["Impairment"]] <- results_Impairment
modelsummary::modelsummary(table_results_MONTH,
gof_omit = "(R2 Adj.|Sample size)",
output = "latex")
knitr::opts_chunk$set(echo = TRUE)
# 事前準備 --------------------
# パッケージの読み込み
library(tidyverse)
# 乱数の種を固定　=>　毎回同じように乱数を発生させるようにする。0を他の数値に変えると異なる乱数となる。
set.seed(0)
# データの生成 ----------------
# n:サンプルサイズ
n <- 10000
# 能力は0から100まで均等に分布。#runifは一様分布を発生させる関数。標本規模n、最小値0、最大値100
ability <- runif(n, min = 0, max = 100)
# IDとabilityをデータフレームに格納する。
# 以下の"tibble()"はtidyverseにおけるデータフレームを作成する関数。
# 代わりに"data.frame()"を用いても構わない。
df <- tibble(ID = 1:n, ability)
# 大卒ダミーの作成
# 能力が 80 以上の約 2000人の中から約 1000人をランダムに選ばれて大卒にする。
# dfからdplyr::filter()で抽出し、sample_fram()でさらに半分をランダムに抽出する。
university_df <- df %>% filter(ability >= 80) %>% sample_frac(0.5) # 大卒の人
# university_df のデータフレームに、universityという変数を作成し、すべて1とする。
university_df["university"] = 1
# dfからdplyr::anti_join()を用いて"university_df"とマッチしなかった人を抽出する。
no_university_df <- anti_join(df, university_df, by = c("ID","ability")) # 大卒ではない人
# no_university_dfのデータフレームに、universityという変数を作成し、すべて0とする。
no_university_df["university"] = 0
# university_dfとno_university_dfを、dplyr::bind_rowsを用いて結合してあたらしいdfとし、ID順で並べる
df <- bind_rows(university_df, no_university_df) %>% arrange(ID) # 両者を結合
# 所得変数（income)の作成：上記のDGP(母集団回帰モデル）に基づいて生成
df["income"] = 200 + 10*df["ability"] + 500*df["university"] + rnorm(n, mean = 0, sd = 50)  # 誤差項は平均=0、SD=50
# 最初の6行
head(df)
ols_A <- lm(formula = income ~ ability + university, data = df)
library(stargazer)
stargazer(ols_A, type = "tex")
ols_A <- lm(formula = income ~ ability + university, data = df)
library(stargazer)
stargazer(ols_A, type = "latex")
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
rm(list = ls())
path <- getwd()
pacman::p_load(tidyverse,patchwork)
# Font for windows and mac
if (path == "D:/Dropbox/2020COVID_impact_R/R"){
theme_set(theme_gray(base_size = 10, base_family = "Arial"))        # Windows用¥
} else{
theme_set(theme_gray(base_size = 10, base_family = "HiraginoSans-W3"))  # macOS用
}
# Chunk 3
df <- readr::read_csv("df_google.csv")
# Chunk 4
source("functions.R")
DID_results <-DID(outcome_var = df$Divorce)
results_Divorce <- DID_results
results_Divorce
DID_results <- dynamic_DID(outcome_var = df$Divorce)
data <- DID_coefficients_main(DID_results)
data$week <- as.numeric(data$week)
graph_Divorce <- event_study_graph(data)
graph_Divorce
